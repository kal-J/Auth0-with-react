{"version":3,"sources":["Home.js","Profile.js","Nav.js","Auth/Auth.js","Callback.js","App.js","index.js"],"names":["Home","this","props","auth","isAuthenticated","to","Component","Profile","state","profile","error","loadUserProfile","getProfile","setState","className","src","picture","alt","name","given_name","family_name","nickname","email","Nav","login","logout","onClick","dotenv","config","Auth","history","auth0","authorize","handleAuthentication","parseHash","err","authResult","accessToken","idToken","setSession","push","alert","console","log","expiresAt","JSON","stringify","expiresIn","Date","getTime","localStorage","setItem","parse","getItem","removeItem","userProfile","clientID","process","returnTo","getAccessToken","Error","cb","client","userInfo","WebAuth","domain","redirectUri","responseType","scope","Callback","componentDidMount","test","location","hash","App","path","exact","render","ReactDOM","component","document","getElementById"],"mappings":"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","file":"static/js/main.6a1b8d2f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Home extends Component {\r\n  render() {\r\n    return(\r\n        <div>\r\n            <h1>Home</h1>\r\n            {this.props.auth.isAuthenticated() ? <Link to=\"/profile\">View Profile</Link>: null}\r\n        </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"./css/profile.css\";\r\n\r\nexport default class Profile extends Component {\r\n  state = {\r\n    profile: null,\r\n    error: \"\",\r\n  };\r\n  componentDidMount() {\r\n    this.loadUserProfile();\r\n  }\r\n\r\n  loadUserProfile() {\r\n    this.props.auth.getProfile((profile, error) => {\r\n      this.setState({ profile, error });\r\n    });\r\n  }\r\n  render() {\r\n    const { profile } = this.state;\r\n    if (!profile) return null;\r\n    return (\r\n      <div className=\"profile\">\r\n        <h1>Profile</h1>\r\n        <img src={profile.picture} alt=\"profile pic\" />\r\n        <div className=\"list-info\">\r\n          <div className=\"list\">\r\n            <span className=\"property\">Name</span>\r\n            <span>{profile.name}</span>\r\n          </div>\r\n          <div className=\"list\">\r\n            <span className=\"property\">Given Name</span>\r\n            <span>{profile.given_name}</span>\r\n          </div>\r\n          <div className=\"list\">\r\n            <span className=\"property\">Family Name</span>\r\n            <span>{profile.family_name}</span>\r\n          </div>\r\n          <div className=\"list\">\r\n            <span className=\"property\">Nick Name</span>\r\n            <span>{profile.nickname}</span>\r\n          </div>\r\n          <div className=\"list\">\r\n            <span className=\"property\">Email</span>\r\n            <span>{profile.email}</span>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Nav extends Component {\r\n  render() {\r\n    const { isAuthenticated, login, logout } = this.props.auth;\r\n    return (\r\n      <nav>\r\n        <ul>\r\n          <li>\r\n            <Link to=\"/\">Home</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/profile\">Profile</Link>\r\n          </li>\r\n          <li>\r\n            <button onClick={isAuthenticated() ? logout : login}>\r\n              {isAuthenticated() ? \"log out\" : \"log in\"}\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n","import auth0 from \"auth0-js\";\r\nimport dotenv from \"dotenv\";\r\n\r\n//read .env file\r\ndotenv.config();\r\n\r\nexport default class Auth {\r\n  constructor(history) {\r\n    this.history = history;\r\n    this.userProfile = null;\r\n    this.auth0 = new auth0.WebAuth({\r\n      domain: process.env.REACT_APP_AUTH0_DOMAIN,\r\n      clientID: process.env.REACT_APP_AUTH0_CLIENTID,\r\n      redirectUri: process.env.REACT_APP_AUTH0_CALLBACK_URL,\r\n      responseType: \"token id_token\",\r\n      scope: \"openid profile email\",\r\n    });\r\n  }\r\n\r\n  login = () => {\r\n    this.auth0.authorize();\r\n  };\r\n\r\n  handleAuthentication = () => {\r\n    this.auth0.parseHash((err, authResult) => {\r\n      if (authResult && authResult.accessToken && authResult.idToken) {\r\n        this.setSession(authResult);\r\n        this.history.push(\"/\");\r\n      } else if (err) {\r\n        this.history.push(\"/\");\r\n        alert(`Error: ${err.error}. check console`);\r\n        console.log(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  setSession = (authResult) => {\r\n    //set the time that the access token will expire\r\n    const expiresAt = JSON.stringify(\r\n      authResult.expiresIn * 1000 + new Date().getTime()\r\n    );\r\n\r\n    localStorage.setItem(\"access_token\", authResult.accessToken);\r\n    localStorage.setItem(\"id_token\", authResult.idToken);\r\n    localStorage.setItem(\"expires_at\", expiresAt);\r\n  };\r\n\r\n  isAuthenticated = () => {\r\n    const expiresAt = JSON.parse(localStorage.getItem(\"expires_at\"));\r\n    return new Date().getTime() < expiresAt;\r\n  };\r\n\r\n  logout = () => {\r\n    localStorage.removeItem(\"access_token\");\r\n    localStorage.removeItem(\"id_token\");\r\n    localStorage.removeItem(\"expires_at\");\r\n    this.userProfile = null;\r\n    this.auth0.logout({\r\n      clientID: process.env.REACT_APP_AUTH0_CLIENTID,\r\n      returnTo: \"http://localhost:3000\",\r\n    });\r\n  };\r\n\r\n  getAccessToken = () => {\r\n    const accessToken = localStorage.getItem(\"access_token\");\r\n    if (!accessToken) {\r\n      throw new Error(\"No access token found\");\r\n    }\r\n    return accessToken;\r\n  };\r\n\r\n  getProfile = (cb) => {\r\n    if (this.userProfile) return cb(this.userProfile);\r\n    this.auth0.client.userInfo(this.getAccessToken(), (err, profile) => {\r\n      if (profile) this.userProfile = profile;\r\n      cb(profile, err);\r\n    });\r\n  };\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport default class Callback extends Component {\r\n    componentDidMount = () => {\r\n      // handle authentication if expected values are in the URL.\r\n      if(/access_token|id_token|error/.test(this.props.location.hash)){\r\n          this.props.auth.handleAuthentication();\r\n      } else {\r\n          throw new Error(\"Invalid callback URL\");\r\n      }\r\n    }\r\n    \r\n\r\n    render() {\r\n        return (\r\n            <h1>\r\n                Loading...\r\n            </h1>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Profile from \"./Profile\";\nimport Nav from \"./Nav\";\nimport Auth from \"./Auth/Auth\";\nimport Callback from \"./Callback\";\n\nfunction App(props) {\n  const auth = new Auth(props.history);\n  return (\n    <>\n      <Nav auth={auth} />\n      <div className=\"body\">\n        <Route\n          path=\"/\"\n          exact\n          render={(props) => <Home auth={auth} {...props} />}\n        />\n        <Route\n          path=\"/callback\"\n          exact\n          render={(props) => <Callback auth={auth} {...props} />}\n        />\n        <Route\n          path=\"/profile\"\n          exact\n          render={(props) =>\n            auth.isAuthenticated() ? (\n              <Profile auth={auth} {...props} />\n            ) : (\n              <Redirect to=\"/\" />\n            )\n          }\n        />\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport{ BrowserRouter as Router, Route} from 'react-router-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <Router>\n    <Route component={App} />\n  </Router>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}